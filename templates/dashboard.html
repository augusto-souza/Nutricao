{% extends 'base.html' %}

{% block content %}
<div class="row mb-4">
    <div class="col-md-12">
        <h2 class="mb-3">Resumo da Dieta</h2>
    </div>
    
    <div class="col-md-3">
        <div class="card card-custom bg-primary text-white mb-3">
            <div class="card-body">
                <h5 class="card-title">Calorias</h5>
                <p class="card-text display-6">{{ total_calorias }} kcal</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card card-custom bg-danger text-white mb-3">
            <div class="card-body">
                <h5 class="card-title">Proteínas</h5>
                <p class="card-text display-6">{{ total_proteinas }}g</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card card-custom bg-warning text-dark mb-3">
            <div class="card-body">
                <h5 class="card-title">Carboidratos</h5>
                <p class="card-text display-6">{{ total_carboidratos }}g</p>
            </div>
        </div>
    </div>
    <div class="col-md-3">
        <div class="card card-custom bg-info text-white mb-3">
            <div class="card-body">
                <h5 class="card-title">Gorduras</h5>
                <p class="card-text display-6">{{ total_gorduras }}g</p>
            </div>
        </div>
    </div>
</div>

<div class="card card-custom">
    <div class="card-header bg-white">
        <h4 class="mb-0">Histórico de Alimentos</h4>
    </div>
    <div class="card-body">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Alimento</th>
                    <th>Calorias</th>
                    <th>Prot (g)</th>
                    <th>Carb (g)</th>
                    <th>Gord (g)</th>
                    <th>Data</th>
                    
                    {% if is_nutricionista %}
                        <th>Ações</th> 
                    {% endif %}
                </tr>
            </thead>
            
            <tbody>
                {% for alimento in alimentos %}
                <tr>
                    <td>{{ alimento.nome }}</td>
                    <td>{{ alimento.calorias }}</td>
                    <td>{{ alimento.proteinas }}</td>
                    <td>{{ alimento.carboidratos }}</td>
                    <td>{{ alimento.gorduras }}</td>
                    <td>{{ alimento.data_consumo|date:"d/m/Y" }}</td>
                    
                    {% if is_nutricionista %}
                    <td>
                        <a href="{% url 'editar_alimento' alimento.id %}" class="btn btn-sm btn-warning" title="Editar">
                            Editar
                        </a>
                        <a href="{% url 'deletar_alimento' alimento.id %}" class="btn btn-sm btn-danger" title="Excluir">
                            Excluir
                        </a>
                    </td>
                    {% endif %}
                </tr>
                {% empty %}
                <tr>
                    <td colspan="{% if is_nutricionista %}7{% else %}6{% endif %}" class="text-center text-muted">
                        Nenhum alimento registrado ainda.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}